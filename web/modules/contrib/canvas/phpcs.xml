<?xml version="1.0" encoding="UTF-8"?>
<!--
# To use:
$ ln -sv /PATH/TO/DRUPAL/ROOT/core/core/phpcs.xml.dist core.phpcs.xml.dist
core.phpcs.xml.dist -> /PATH/TO/DRUPAL/ROOT/core/phpcs.xml.dist
-->
<ruleset name="canvas">
  <exclude-pattern>*/modules/canvas_vite/*</exclude-pattern>
  <!-- Drupal (core) uses stylelint: https://www.drupal.org/list-changes/drupal/published?keywords_description=stylelint-->
  <exclude-pattern>*.css$</exclude-pattern>
  <!-- Drupal (core) uses eslint: https://www.drupal.org/list-changes/drupal/published?keywords_description=eslint-->
  <exclude-pattern>*.js$</exclude-pattern>
  <!-- YAML files that create PHP scripts can trigger phpcs -->
  <exclude-pattern>*.yaml$</exclude-pattern>
  <exclude-pattern>*.yml$</exclude-pattern>

  <!-- Use the Drupal coding standard, but … -->
  <rule ref="./core.phpcs.xml.dist">
    <!-- … don't require boilerplate docs *yet*. -->
    <exclude name="Drupal.Commenting.FunctionComment.MissingParamComment"/>
    <exclude name="Drupal.Commenting.FunctionComment.ParamMissingDefinition"/>
    <exclude name="Drupal.Commenting.FunctionComment.MissingReturnComment"/>
    <exclude name="Drupal.Commenting.FileComment.Missing"/>
    <exclude name="Drupal.Commenting.FunctionComment.Missing">
      <exclude-pattern>*/Functional/*</exclude-pattern>
      <exclude-pattern>*/tests/modules/*</exclude-pattern>
    </exclude>
    <exclude name="Drupal.Commenting.VariableComment.Missing"/>
    <exclude name="Drupal.Commenting.ClassComment.Missing">
      <include-pattern>*/Functional/*</include-pattern>
      <include-pattern>*/tests/modules/*</include-pattern>
    </exclude>
  </rule>
  <rule ref="Drupal.Files.EndFileNewline">
    <exclude-pattern>*/config/install/*\.yml$</exclude-pattern>
  </rule>
  <!-- @todo eventually apply stricter rules to canvas_ai, too. -->
  <rule ref="Drupal.Files.LineLength.TooLong">
    <exclude-pattern>*/canvas_ai/*</exclude-pattern>
  </rule>

  <!-- Canvas' additional coding standards. -->
  <rule ref="SlevomatCodingStandard.Namespaces.FullyQualifiedGlobalFunctions">
    <properties>
      <!-- @todo Keep expanding this list until it applies to all global functions. -->
      <property name="include" type="array" value="assert,sprintf" />
    </properties>
  </rule>
</ruleset>
