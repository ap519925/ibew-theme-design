{#
/**
 * @file
 * Theme override to display a single page.
 */
#}
<div class="ibew-page layout-container">
	{% include '@ibew_theme/includes/header.html.twig' %}

	<main role="main" class="main-content">
		<a id="main-content" tabindex="-1"></a>

		{# Check if the current node has Canvas content populated #}
		{% set has_canvas = node.field_content_canvas and not node.field_content_canvas.isEmpty() %}

		{% if has_canvas %}
			{# --- Canvas Mode: Full Width Content Control --- #}
			<div class="ibew-canvas-layout w-full min-h-screen">
				{{ page.content }}
			</div>
		{% else %}
			{# --- Default Mode: Standard Container & Sidebar Layout --- #}
			<div class="ibew-shell container py-5">
				<div
					class="row g-4">
					{# Sidebar First #}
					{% if page.sidebar_first %}
						<aside class="col-lg-3">
							<div class="ibew-card ibew-ghost-border h-100">
								{{ page.sidebar_first }}
							</div>
						</aside>
					{% endif %}

					{# Main Content #}
					{% set content_class = (page.sidebar_first and page.sidebar_second) ? 'col-lg-6' : ((page.sidebar_first or page.sidebar_second) ? 'col-lg-9' : 'col-12') %}
					<div class="{{ content_class }}">
						<div class="ibew-card ibew-ghost-border min-h-50vh">
							{{ page.content }}
						</div>
					</div>

					{# Sidebar Second #}
					{% if page.sidebar_second %}
						<aside class="col-lg-3">
							<div class="ibew-card ibew-ghost-border h-100">
								{{ page.sidebar_second }}
							</div>
						</aside>
					{% endif %}
				</div>
			</div>
		{% endif %}
	</main>

	{# --- Redesigned Footer --- #}
	<footer class="ibew-footer">
		<div class="ibew-shell max-w-7xl mx-auto px-6">

			<div
				class="ibew-footer__container">
				<!-- Col 1: Brand -->
				<div class="ibew-footer__brand-col">
					{{ page.footer_col_1 }}
				</div>

				<!-- Col 2: Quick Links -->
				<div>
					{{ page.footer_col_2 }}
				</div>

				<!-- Col 3: Members -->
				<div>
					{{ page.footer_col_3 }}
				</div>

				<!-- Col 4: Contact -->
				<div>
					{{ page.footer_col_4 }}
				</div>

			</div>

			<div class="ibew-footer__bottom">
				{% if page.footer %}
					{{ page.footer }}
				{% else %}
					&copy;
					{{ "now"|date("Y") }}
					IBEW Local 90. All rights reserved.
				{% endif %}
			</div>
		</div>
	</footer>
</div>
